From 156f892f219d407a6a8aa0e5527d4662bf343e83 Mon Sep 17 00:00:00 2001
From: Yuwei Chen <yuwei.chen@intel.com>
Date: Thu, 27 Aug 2020 16:27:49 +0800
Subject: [Patch 10/12] Support for INF Binary test cases.

Signed-off-by: Yuwei Chen <yuwei.chen@intel.com>
---
 TestPkg/FakeBinary/FakeBinary.inf | 29 +++++++++++++++++++++++++++++
 TestPkg/FakeBinary/FakeBinary.txt |  1 +
 TestPkg/FakeBinary/FakeBinary.uni | 16 ++++++++++++++++
 TestPkg/TestIa32X64.fdf           |  7 +++++++
 4 files changed, 53 insertions(+)
 create mode 100644 TestPkg/FakeBinary/FakeBinary.inf
 create mode 100644 TestPkg/FakeBinary/FakeBinary.txt
 create mode 100644 TestPkg/FakeBinary/FakeBinary.uni

diff --git a/TestPkg/FakeBinary/FakeBinary.inf b/TestPkg/FakeBinary/FakeBinary.inf
new file mode 100644
index 0000000000..dd5ee1289b
--- /dev/null
+++ b/TestPkg/FakeBinary/FakeBinary.inf
@@ -0,0 +1,29 @@
+## @file
+#  The default logo bitmap picture shown on setup screen, which is corresponding to gEfiDefaultBmpLogoGuid.
+#
+#  Copyright (c) 2006 - 2018, Intel Corporation. All rights reserved.<BR>
+#  Copyright (c) 2020, Hewlett Packard Enterprise Development LP. All rights reserved.<BR>
+
+#
+#  SPDX-License-Identifier: BSD-2-Clause-Patent
+#
+#
+##
+
+[Defines]
+  INF_VERSION                    = 0x00010005
+  BASE_NAME                      = FakeBinary
+  MODULE_UNI_FILE                = FakeBinary.uni
+  FILE_GUID                      = 7BB24689-61AB-11D5-9A5D-0090DE4CC14D
+  MODULE_TYPE                    = USER_DEFINED
+  VERSION_STRING                 = 1.0
+
+#
+# The following information is for reference only and not required by the build tools.
+#
+#  VALID_ARCHITECTURES           = IA32 X64 EBC ARM AARCH64 RISCV64
+#
+
+[Binaries.X64]
+  BIN|FakeBinary.txt|*
+
diff --git a/TestPkg/FakeBinary/FakeBinary.txt b/TestPkg/FakeBinary/FakeBinary.txt
new file mode 100644
index 0000000000..fa13c1a8a7
--- /dev/null
+++ b/TestPkg/FakeBinary/FakeBinary.txt
@@ -0,0 +1 @@
+This is a fake binary file.
\ No newline at end of file
diff --git a/TestPkg/FakeBinary/FakeBinary.uni b/TestPkg/FakeBinary/FakeBinary.uni
new file mode 100644
index 0000000000..9d1bbaffa9
--- /dev/null
+++ b/TestPkg/FakeBinary/FakeBinary.uni
@@ -0,0 +1,16 @@
+// /** @file
+// The default logo bitmap picture shown on setup screen, which is corresponding to gEfiDefaultBmpLogoGuid.
+//
+// This module provides the default logo bitmap picture shown on setup screen, which corresponds to gEfiDefaultBmpLogoGuid.
+//
+// Copyright (c) 2006 - 2014, Intel Corporation. All rights reserved.<BR>
+//
+// SPDX-License-Identifier: BSD-2-Clause-Patent
+//
+// **/
+
+
+#string STR_MODULE_ABSTRACT             #language en-US "Provides the default logo bitmap picture shown on setup screen, which corresponds to gEfiDefaultBmpLogoGuid"
+
+#string STR_MODULE_DESCRIPTION          #language en-US "This module provides the default logo bitmap picture shown on setup screen, which corresponds to gEfiDefaultBmpLogoGuid."
+
diff --git a/TestPkg/TestIa32X64.fdf b/TestPkg/TestIa32X64.fdf
index 230250f210..9c1cef54b0 100644
--- a/TestPkg/TestIa32X64.fdf
+++ b/TestPkg/TestIa32X64.fdf
@@ -227,10 +227,13 @@ FILE FV_IMAGE = 9E21FD93-9C72-4c15-8C4B-E77F1DB2D792 {
    }
  }
 
 !include FvmainCompactScratchEnd.fdf.inc
 
+FILE RAW = 7BB24689-61AB-11D5-9A5D-0090DE4CC14D {
+    SECTION RAW = TestPkg\FakeBinary\FakeBinary.txt
+}
 ################################################################################
 
 [Rule.Common.SEC]
   FILE SEC = $(NAMED_GUID) {
     PE32     PE32           $(INF_OUTPUT)/$(MODULE_NAME).efi
@@ -336,5 +339,9 @@ FILE FV_IMAGE = 9E21FD93-9C72-4c15-8C4B-E77F1DB2D792 {
     SMM_DEPEX    SMM_DEPEX Optional      $(INF_OUTPUT)/$(MODULE_NAME).depex
     PE32     PE32                    $(INF_OUTPUT)/$(MODULE_NAME).efi
     UI       STRING="$(MODULE_NAME)" Optional
     VERSION  STRING="$(INF_VERSION)" Optional BUILD_NUM=$(BUILD_NUMBER)
   }
+[Rule.Common.USER_DEFINED.FAKEBINARY]
+  FILE FREEFORM = $(NAMED_GUID) {
+    RAW BIN               |.txt
+  }
\ No newline at end of file
-- 
2.29.1.windows.1

